# v0.1.0 CFGX定义和说明

## 格式规定

为了有初步的修改按键、参数值的功能，先按如下规定CFGX的格式

- `//CFGX` 开头的一段，遇到空行或下一个 `//CFGX` 停止，看作一块
- 按 `类型[名][值]{说明};` 的格式表示键位、自定义、值、说明，值和说明可省略，其他不可
- 类型定义：
  - `CFGX[版本号]{说明}`
  - `KEY[快捷键名][快捷键位值]{说明}`
  - `ALIAS[自定义指令名][值]{说明}`
  - `VALUE[值名称][值]{说明}`
  - `INFO{说明}`
- 可以多行注释放若干⬆️，但保证 `n行注释`  `n行正文` 的格式， 不能有空行
- 正文代码中用 `[[名]]` 的格式书写

## 格式示例 Demo

```
//CFGX[v0.1.0];KEY[Key1][ins]{打印消息并退出};ALIAS[myalias][gg];
//VALUE[sth-to-say][hello, world!]{在公屏发一段话};
//INFO{演示一下CFGX的格式}
bind "[[Key1]]" "say [[sth-to-say]]; [[myalias]]"
alias "[[myalias]]" "quit"

//CFGX[v0.1.0];
...
```

## 解析 Parse

利用正则表达式解析，根据规定1划分代码块，在注释中读取各种类型的定义和值、读取正文字符串，转换成JSON格式，每个文件即如下object的list

```
version string
key list {name value info}
alias list {name value info}
value list {name value info}
info string
script string
```

## 修改  Modify

- 利用解析的结果，在图形界面中展现出来，并可操作修改各参数

- `key` 和 `value` 作为修改的重点，`alias` 可以先折叠起来，对用户属于`高级设置`

## 生成 Generate

- 把 `script` 中所有的 `[[name]] ` 替换成 `[[value]]` 并根据值和说明生成一段说明注释

- 每个文件的所有块生成结果**用空行分隔**存到 `.cfg` 文件中，生成结束

```
//演示一下CFGX的格式
// ins 键 -> 打印消息并退出
bind "ins" "say hello, world!; gg"
alias "gg" "quit"
```

